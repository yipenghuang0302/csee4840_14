\section{Hardware/Software Interface}

We will design a ``joint" peripheral through which the software and hardware components of our system will interact. 
The driver for the joint peripheral will provide an ioctl that copies a struct to and from the user with the following components:
\begin{verbatim}
unsigned char joint; /* 0,1,...,JOINT_DOF-1 */
unsigned char parameter;  /* THETA,L_OFFSET,L_DISTANCE,ALPHA */ 
unsigned short magnitude; 
\end{verbatim}
The \texttt{joint} field represents which joint we're referring to (we have a total of \texttt{JOINT\_DOF} joints), the parameter field
is a constant signifying which D-H parameter we're reading or writing, and the magnitude field holds the value of that D-H parameter.

The registers used by the device driver are represented with the following struct, following the example given in lab 3:

\begin{verbatim}
struct joint_dev{
	struct resource res;		/* Resource: our registers */
	void __iomem *virtbase; /* Pointer to registers */
	u16 dh_params[JOINT_DOF * 4] /* Every joint has 4 parameters */
} dev;
\end{verbatim}

The array in the given struct will be used to read and write magnitudes for various D-H parameters in the given configuration. For example,
the magnitude of the third joint's theta parameter would be stored at \texttt{dh\_params[2*4 + THETA]}.

